<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Diseño | Apuntes de 4º de Ingeniería Informática</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../ico/0_Introduccion.html" />
    
    
    <link rel="prev" href="../dbcs/3_frameworks.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="3.4"
        data-chapter-title="Diseño"
        data-filepath="dbcs/4_diseno.md"
        data-basepath=".."
        data-revision="Sun Jan 31 2016 13:40:15 GMT+0100 (CET)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" >
            
            <span><b>1.</b> Administración y diseño de bases de datos</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="adbd/1_Introduccion.html">
            
                
                    <a href="../adbd/1_Introduccion.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Introducción
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="adbd/2_modelado_datos.html">
            
                
                    <a href="../adbd/2_modelado_datos.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Modelado de datos
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="adbd/3_modelo_relacional.html">
            
                
                    <a href="../adbd/3_modelo_relacional.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        Modelo relacional
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="adbd/4_lenguajes_relacionales.html">
            
                
                    <a href="../adbd/4_lenguajes_relacionales.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                        Lenguajes relacionales
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="adbd/5_SQL.html">
            
                
                    <a href="../adbd/5_SQL.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.5.</b>
                        
                        SQL
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="adbd/6_normalizacion.html">
            
                
                    <a href="../adbd/6_normalizacion.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.6.</b>
                        
                        Normalización
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="adbd/7_administracion_bd.html">
            
                
                    <a href="../adbd/7_administracion_bd.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.7.</b>
                        
                        Administración de bases de datos
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="ars/ars.html">
            
                
                    <a href="../ars/ars.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Arquitectura de redes y servicios
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3" >
            
            <span><b>3.</b> Desarrollo basado en componentes y servicios</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="dbcs/1_introduccion.html">
            
                
                    <a href="../dbcs/1_introduccion.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Introducción
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="dbcs/2_modelos_componentes.html">
            
                
                    <a href="../dbcs/2_modelos_componentes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Modelos de componentes
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="dbcs/3_frameworks.html">
            
                
                    <a href="../dbcs/3_frameworks.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        Frameworks
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="3.4" data-path="dbcs/4_diseno.html">
            
                
                    <a href="../dbcs/4_diseno.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                        Diseño
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="dbcs/5_servicio_web.html">
            
            <span><b>3.5.</b> Servicios web</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" >
            
            <span><b>4.</b> Ingeniería del conocimiento</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="ico/0_Introduccion.html">
            
                
                    <a href="../ico/0_Introduccion.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Introducción
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="ico/1_logica_proposicional.html">
            
                
                    <a href="../ico/1_logica_proposicional.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        Lógica proposicional
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="ico/2_logica_predicados.html">
            
                
                    <a href="../ico/2_logica_predicados.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                        Lógica de predicados
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="ico/3_estrategias_resolucion.html">
            
                
                    <a href="../ico/3_estrategias_resolucion.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.4.</b>
                        
                        Estrategias de resolución
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="ico/4_programacion_logica.html">
            
                
                    <a href="../ico/4_programacion_logica.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.5.</b>
                        
                        Programación lógica
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="ico/5_representacion_conocimiento.html">
            
                
                    <a href="../ico/5_representacion_conocimiento.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.6.</b>
                        
                        Representación del conocimiento
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.7" data-path="ico/6_sistemas_basados_en_reglas.html">
            
            <span><b>4.7.</b> Sistemas basados en reglas</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.8" data-path="ico/7_metodos_estructurados.html">
            
                
                    <a href="../ico/7_metodos_estructurados.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.8.</b>
                        
                        Métodos estructurados
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" >
            
            <span><b>5.</b> Planificación y gestión de proyectos</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="pgp/1.html">
            
                
                    <a href="../pgp/1.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        Introducción
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="pgp/2_1_Planificacion.html">
            
                
                    <a href="../pgp/2_1_Planificacion.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        Planificación
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="pgp/2_2_PERT_CPM.html">
            
                
                    <a href="../pgp/2_2_PERT_CPM.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                        PERT y CPM
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="pgp/2_3_gestion_recursos.html">
            
                
                    <a href="../pgp/2_3_gestion_recursos.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.</b>
                        
                        Gestión de recursos
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="pgp/2_4_gestion_personas.html">
            
                
                    <a href="../pgp/2_4_gestion_personas.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.5.</b>
                        
                        Gestión de personas
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.6" data-path="pgp/2_5_gestion_riesgos.html">
            
                
                    <a href="../pgp/2_5_gestion_riesgos.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.6.</b>
                        
                        Gestión de riesgos
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.7" data-path="pgp/3_1_proceso_unificado.html">
            
                
                    <a href="../pgp/3_1_proceso_unificado.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.7.</b>
                        
                        Proceso unificado
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.8" data-path="pgp/3_2_plan_de_proceso.html">
            
                
                    <a href="../pgp/3_2_plan_de_proceso.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.8.</b>
                        
                        Plan de proceso
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.9" data-path="pgp/3_3_SCRUM.html">
            
                
                    <a href="../pgp/3_3_SCRUM.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.9.</b>
                        
                        SCRUM
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.10" data-path="pgp/4_gestion_configuraciones.html">
            
                
                    <a href="../pgp/4_gestion_configuraciones.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.10.</b>
                        
                        Gestión de configuraciones
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" >
            
            <span><b>6.</b> Profesión y sociedad</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="pys/1_ambitos_y_perfiles_profesionales.html">
            
                
                    <a href="../pys/1_ambitos_y_perfiles_profesionales.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        Ámbitos y perfiles profesionales
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="pys/2_formacion_complementaria.html">
            
                
                    <a href="../pys/2_formacion_complementaria.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                        Formación complementaria
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" data-path="ssee/ssee.html">
            
                
                    <a href="../ssee/ssee.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        Sistemas embebidos
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >Apuntes de 4º de Ingeniería Informática</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="4-ingenier&#xED;a-del-software-basada-en-componentes">4. Ingenier&#xED;a del Software basada en componentes</h1>
<h2 id="41-especificaci&#xF3;n-de-componentes-con-uml">4.1 Especificaci&#xF3;n de componentes con UML</h2>
<p>Un componente representa una parte modular del un sistema que encapsula su contenido y cuya manifestaci&#xF3;n es reemplazable dentro de su entorno. Se ve como una caja negra cuyo comportamiento est&#xE1; completamente definido por sus interfaces proporcionadas y requeridas, y puede ser sustituido por otros componentes que proporcionen el mismo protocolo.</p>
<p>Los componentes pueden ser f&#xED;sicos (instanciados directamente en tiempo de ejecuci&#xF3;n como un EJB) o l&#xF3;gicos (una construcci&#xF3;n l&#xF3;gica como un subsistema, que solo se instancia indirectamente al instanciar sus partes).</p>
<p><strong>Intefaz proporcionada</strong>: la interfaz que implementa el componente. Ofrece sus servicios.</p>
<p><img src="img/interfazProporcionada.png" alt="Interfaz proporcionada"></p>
<p><strong>Interfaz requerida</strong>: indica que el componente utiliza los servicios definidos por la interfaz.</p>
<p><img src="img/interfazRequerida.png" alt="Interfaz requerida"></p>
<p><strong>Conectores de ensamblado</strong>: conexi&#xF3;n entre ambos tipos de interfaz.</p>
<p><img src="img/conectorEnsamblado.png" alt="Conector de ensamblado"></p>
<p><strong>Representaciones de caja negra</strong>:</p>
<p><img src="img/cajaNegra.png" alt="Representaciones de caja negra"></p>
<p><strong>Representaciones de caja blanca</strong>:</p>
<p><img src="img/cajaBlanca.png" alt="Representaciones de caja blanca"></p>
<p>Un <strong>puerto</strong> especifica un punto de interacci&#xF3;n entre un clasificador y su entorno. Se describe por sus interfaces proporcionadas y requeridas. Es un conjunto sem&#xE1;nticamente cohesivo de interfaces, y puede tener un nombre.</p>
<p><img src="img/puerto.png" alt="Puerto"></p>
<h3 id="estructura-interna">Estructura interna</h3>
<p>Internamente, un componente puede realizarse con clases o descomponerse en otros componentes. Las interfaces delegan en las partes internas, pudiendo mostrar los elementos anidados, conectados a &#xE9;l por relaciones de dependencia.</p>
<p>Se pueden mostrar clases que realizan el componente (compartimento de elementos empaquetados) o componentes internos (compartimento de estructura interna) con sus partes y conectores.</p>
<p><img src="img/elementosEmpaquetados.png" alt="Compartimento de elementos empaquetados">
<!-- TODO Completar desde diapo 13 --></p>
<h3 id="411-partici&#xF3;n-subsistemas-como-componentes">4.1.1 Partici&#xF3;n: subsistemas como componentes</h3>
<p>El sistema se divide en subsistemas, que se dividen en m&#xF3;dulos, que se dividen en sucesivos niveles de componentes que finalmente se implementan con clases y objetos.</p>
<p>Un <strong>subsistema</strong> es un componente que act&#xFA;a como unidad de descomposici&#xF3;n de un sistema para dividirlo en porciones manejables. Es un paquete UML. Se agrupan en el mismo subsistema las clases o componentes que se encuentrar en el mismo &#xE1;rea de inter&#xE9;s, pertenecen a la misma jerarqu&#xED;a, comparten casos de uso o est&#xE1;n asociadas fuertemente.</p>
<p>No se puede instanciar un subsistema en tiempo de ejecuci&#xF3;n pero s&#xED; se pueden instanciar sus partes contenidas, y conectarse a otros subsistemas a trav&#xE9;s de interfaces para crear una arquitectura.</p>
<p>Una <strong>arquitectura f&#xED;sica</strong> est&#xE1; formada por subsistemas e interfaces, con los subsistemas organizados seg&#xFA;n el patr&#xF3;n arquitect&#xF3;nico de capas. Cada capa contiene subsistemas de dise&#xF1;o: capa de presentaci&#xF3;n, de dominio, de servicios, de utilidades, etc. Las dependencias entre capas se definen cuidadosamente, van en una sola direcci&#xF3;n y siempre a trav&#xE9;s de interfaces.</p>
<p><img src="img/arquitecturaCapas.png" alt="Arquitectura en capas"></p>
<p>Es conveniente dividr el modelo que representa todo el dominio. Por ello, organizamos un paquete con los elementos comunes como subsistema y el resto de paquetes como subsistemas. <!-- TODO No está muy claro --></p>
<p>La interfaz de usuario se comunica con un controlador de fachada, aplicando el patr&#xF3;n fachada. Para aplicar este patr&#xF3;n, se identifican las partes cohesivas del sistema, se empaquetan en un subsistema y se define una interfaz para interactura con ese subsistema. Las dependencias entre subsistemas se pueden implementar con conectores.</p>
<h2 id="42-dise&#xF1;o-de-componentes-con-jee">4.2 Dise&#xF1;o de componentes con JEE</h2>
<p>En JSP se usa MVC, con JavaBean como modelo.</p>
<p>En JEE se dise&#xF1;an los componentes en varias capas. Se parte de la especificaci&#xF3;n de los componentes en UML. Despu&#xE9;s se dise&#xF1;an &#xE9;stos en capas, se dise&#xF1;a la arquitectura de red, se programan y se realizan las pruebas unitarias.</p>
<p>En JEE existen las siguientes capas:</p>
<ul>
<li>Capa de presentaci&#xF3;n: controla lo que se muestra al usuario final.</li>
<li>Capa de despliegue: publica las operaciones de las clases de dominio.</li>
<li>Capa de dominio: procesa la l&#xF3;gica y las reglas de negocio a trav&#xE9;s de clases de dominio u objetos de negocio. Junto con la capa de despliegue, implementa la l&#xF3;gica de negocio.</li>
<li>Capa de acceso a datos: gestiona la lectura, escritura, actualizaci&#xF3;n y borrado de los datos almacenados. Podr&#xED;a funcionar con JDBC/JPA pero tambi&#xE9;n con XML o ficheros.</li>
<li>Capa de componentes arquitect&#xF3;nicos: componentes gen&#xE9;ricos que pueden usarse en todas las capas.</li>
<li>Capa de objetos de transferencia de datos: estructuras de informaci&#xF3;n ligeras (DTOs) relacionadas con las clases de dominio usadas para compartir informaci&#xF3;n a trav&#xE9;s de las capas.</li>
</ul>
<h3 id="capa-de-acceso-a-datos">Capa de acceso a datos</h3>
<p>Se implementa mediante clases de tipo Data Access Objects (DAO) u otro patr&#xF3;n equivalente. Gestiona el acceso al almacenamiento persistente independientemente del tipo que sea. El acceso a datos independiente permite cambiar las fuentes de datos y compartir el acceso a datos entre distintas aplicaciones.</p>
<h3 id="l&#xF3;gica-de-negocio">L&#xF3;gica de negocio</h3>
<h4 id="capa-de-dominio">Capa de dominio</h4>
<p>Proviene de las clases del dominio y las reglas de negocio. Las clases de dominio deber&#xED;an estar separadas de las capas DAO y de despliegue para maximizar sus posibilidades de reutilizaci&#xF3;n.</p>
<p>Suele utilizar y coordinar varios DAOs. Suele usar patrones como adaptador, compuesto, estrategia, etc.</p>
<h4 id="capa-de-despliegue">Capa de despliegue</h4>
<p>Es espec&#xED;fica de la arquitectura JEE. Incluye los EJBs de mensaje y sesi&#xF3;n y/o los servicios web necesarios. Se puede tener un servicio web y un EJB para la misma capa de dominio.</p>
<h5 id="tipos-de-despliegue">Tipos de despliegue</h5>
<p><img src="img/tipoDespliegue.png" alt="Tipos de despliegue"></p>
<p>Si la clase de dominio se usa por p&#xE1;ginas HTML din&#xE1;micas, servlets o JSP, se pueden aislar con alg&#xFA;n tipo de despliegue en lugar de ser utilizados directamente por la capa de presentaci&#xF3;n. Suele implementarse con un <strong>EJB de sesi&#xF3;n</strong>.</p>
<p>Si la clase de dominio requiere soporte de transacciones (requiere JTA, proporcionado por contenedores JEE), se puede implementar con un <strong>EJB de sesi&#xF3;n &quot;stateful&quot;</strong>.</p>
<p>Si la clase de dominio recibe y procesa mensajes JMS, se implementa con un <strong>EJB de mensaje</strong>.</p>
<p>Si la clase de domino es invocada desde aplicaciones no Java, se puede implementar como <strong>servicio web</strong>.</p>
<h3 id="capa-de-presentaci&#xF3;n">Capa de presentaci&#xF3;n</h3>
<p>Es la secci&#xF3;n de la aplicaci&#xF3;n responsable de todo lo que los usuarios finales ven f&#xED;sicamente en la interfaz de usuario. JEE soporta interfaces HTML/Javascript, y produce interfaces HTML usando una combinaci&#xF3;n de p&#xE1;ginas HTML est&#xE1;ticas y din&#xE1;micas, generadas por sevlets y JSP. Puede estar en una m&#xE1;quina distinta del contenedor JEE (interfaz remota).</p>
<h3 id="capas-auxiliares">Capas auxiliares</h3>
<p>Capas de objetos de transferencia de datos (data transfer objects). Son estructuras de datos &#xFA;tiles. En UML se indican con el estereotipo <code>&lt;&lt;DataType&gt;&gt;</code>. Se conoce como patron DTO.</p>
<p>Capa de componentes arquitect&#xF3;nicos: componentes de terceros, utilidades comunes, etc.</p>
<h3 id="proceso-de-desarrollo-tareas-de-dise&#xF1;o">Proceso de desarrollo: tareas de dise&#xF1;o</h3>
<p>Fases previas:</p>
<ul>
<li>Casos de uso y modelo de dominio.</li>
<li>Diagramas de secuencia y m&#xE1;quinas de estado.</li>
</ul>
<p>Capas y clases de dise&#xF1;o de cada componente (arqitectura est&#xE1;ndar JEE): de cada clase del dominio se derivan varias, una por cada capa (...Manager, ..., ...DAO, ...DTO). Se utilizan interfaces, especialmente para los EJB. Los m&#xE9;todos derivan de las operaciones del dominio y se incorporan a todas o parte de las clases de dise&#xF1;o.</p>
<p>Algunas recomendaciones y consejos son:</p>
<ul>
<li>Pedir y devolver estructuras de datos (DTO) en lugar de atributos individuales para aumentar el rendimiento.</li>
<li>Documentar cada clase del dominio como un bloque en lugar de dividirlo en sus tres o cuatro componentes (EJB, DAO, DTO, etc.).</li>
<li>Todos los atributos documentados tienen que tener getters y setters.</li>
<li>No es necesario detallar los modelos completos con UML, puesto que las herramientas lo hacen mejor.</li>
<li>Se puede automatizar el acceso a datos mediante JPA y simplificar las capas de dominio y DTO.</li>
</ul>
<h3 id="arquitectura-de-la-red">Arquitectura de la red</h3>
<p>El arquitecto es responsable de asegurarse de que las aplicaciones cumplan con la infraestructura de <strong>seguridad</strong> de la empresa, de la <strong>escalabilidad</strong> (capacidad de la aplicaci&#xF3;n de manejar un n&#xFA;mero cada vez mayor de usuarios) y de la <strong>disponibilidad</strong> (una aplicaci&#xF3;n con alta disponibilidad es aquella que est&#xE1; siempre disponible para su uso y tiene un m&#xED;nimo tiempo de inactividad) de las aplicaciones.</p>
<h3 id="seguridad">Seguridad</h3>
<p>En la mayor&#xED;a de las empresas, la seguridad est&#xE1; centralizada y se trata como una cuesti&#xF3;n de infraestructura. Por tanto, hay que aprovechar la infraestructura de seguridad tanto como sea posible, y hay ue auditar el uso de identificadores gen&#xE9;ricos por problemas de acceso a la base de datos.</p>
<h2 id="43-dise&#xF1;o-de-las-capas">4.3 Dise&#xF1;o de las capas</h2>
<h3 id="431-patr&#xF3;n-dto">4.3.1 Patr&#xF3;n DTO</h3>
<p>Con este patr&#xF3;n se dise&#xF1;a una de las capas transversales de la arquitectura. Resuelve el problema de c&#xF3;mo permitir a un cliente intercambiar datos con el servidor sin hacer m&#xFA;ltiples llamadas de red de grano fino preguntando por cada dato.</p>
<p>DTO lo resuelve transfiriendo un objeto ligero al cliente con todos los datos necesarios. Despu&#xE9;s, el cliente  puede hacer peticiones locales al objeto que ha recibido.</p>
<p>Para ello, se crean clases Java que encapsulan los datos en un paquete transportable por la red (implementan <code>java.io.Serializable</code>).</p>
<p>Una clase DTO es una clase ligera que representa una estructura de datos (<code>&lt;&lt;datatype&gt;&gt;</code> en UML) e implementa <code>java.io.Serializable</code>. Se usa en todas las capas de la aplicaci&#xF3;n. Se elige esta soluci&#xF3;n por resolver el problema de eficiencia descrito anteriormente.</p>
<p>Es recomendable rellenar siempre todos los campos del DTO para evitar errores <code>NullPointerException</code> (puede ser mejor una cadena vac&#xED;a), hacer que los DTOs sean autodescriptivos, usar arrays o colecciones de DTOs cuando sea necesario, y considerar m&#xE9;todos que redefinan <code>equals()</code>.</p>
<p>Hay dos variantes. Podemos usar DTOs personalizados que representan parte de un bean o agrupan varios beans, o bien podemos usar DTOs de dominio denominados &quot;entities&quot;. Al usar patr&#xF3;n fachada, una clase de dominio no es accesible directamente por el cliente. Por esa raz&#xF3;n, se hacen copias DTO de los objetos de dominio del servidor (entities). Los clientes pueden operar sobre copias locales mejorando el rendimiento de las lecturas y actualizaciones.</p>
<h3 id="432-patrones-de-la-capa-de-acceso-a-datos">4.3.2 Patrones de la capa de acceso a datos</h3>
<p>Hay varias opciones. Se puede usar el patr&#xF3;n Active Record (los m&#xE9;todos CRUD se incluyen en la clase) y eliminar la capa de acceso a datos pues la clase de dominio maneja directamente el acceso a datos.</p>
<p>Sin embargo, conviene separar el acceso a datos en un paquete independiente. Lo m&#xE1;s com&#xFA;n es hacerlo a trav&#xE9;s del patr&#xF3;n DAO/EAO o del patr&#xF3;n Mapper.</p>
<h4 id="patr&#xF3;n-dao">Patr&#xF3;n DAO</h4>
<p>Requiere un <code>DataSource</code> que representa una base de datos, XML, archivo, etc y un <code>ResultSet</code> que es la respuesta del <code>DataSource</code>. El DAO manipula el resultado para devolver un DTO serializable.</p>
<h4 id="patr&#xF3;n-daojpa-o-entity-access-objects-eao">Patr&#xF3;n DAO/JPA o Entity Access Objects (EAO)</h4>
<p>Con este patr&#xF3;n, el DTO es una clase tipo <code>Entity</code> JPA. La interfaz del EAO proporciona los m&#xE9;todos para crear, buscar, borrar, etc.</p>
<h4 id="patr&#xF3;n-fachada-de-acceso-a-datos">Patr&#xF3;n fachada de acceso a datos</h4>
<p>Una clase <code>Entity</code> es un POJO, no un EJB. Se usa un EJB como fachada para acceder a la instancia de la clase entity desde las capas de dominio o despliegue.</p>
<h4 id="automatizaci&#xF3;n-con-netbeans">Automatizaci&#xF3;n con NetBeans</h4>
<p>NetBeans permite automatizar el patr&#xF3;n DAO. Genera la clase <code>@Entity</code> y un EJB de sesi&#xF3;n con su interfaz b&#xE1;sica CRUD de acceso a datos que act&#xFA;an como fachada de acceso a datos.</p>
<p>La alternativa es usar el <strong>patr&#xF3;n Mapper OR</strong> (Objeto-Relacional). Es una opci&#xF3;n que ofrece una traducci&#xF3;n m&#xE1;s directa entre objetos y almacenamiento relacional. Permite que el EJB devuelva instancias de clases del dominio, invirtiendo la dependencia.</p>
<p>La interfaz del mapper nos proporciona los m&#xE9;todos CRUD, haciendo que la clase del dominio no sea un EJB sino un POJO.</p>
<h3 id="433-patrones-de-la-capa-de-negocio">4.3.3 Patrones de la capa de negocio</h3>
<h4 id="despliegue-patr&#xF3;n-fachada-de-sesi&#xF3;n">Despliegue: Patr&#xF3;n fachada de sesi&#xF3;n</h4>
<p>Los EJB de sesi&#xF3;n pueden ser utilizados desde distintos clientes (servlets, aplicaciones cliente servidor de escritorio, etc), reduciendo el acoplamiento. Corresponde al controlador de fachada del modelo de an&#xE1;lisis, con los m&#xE9;todos de los EJB de sesi&#xF3;n correspondiendo con las operaciones de los diagramas de secuencia del sistema. Usar EJB de sesi&#xF3;n sin estado (stateless) mejora el rendimiento.</p>
<p>En la capa de despliegue se implementa el patr&#xF3;n fachada de sesi&#xF3;n, que es la interfaz para los clientes que conecta con la capa de dominio.</p>
<p>Este patr&#xF3;n resuelve el problema de que un EJB ejecute todas las llamadas involucradas en un caso de uso a partir de una &#xFA;nica petici&#xF3;n de red desde el cliente. Esta fachada se implementa con un Session EJB.</p>
<p>Otra alternativa es usar el patr&#xF3;n comando EJB, que implementa una soluci&#xF3;n m&#xE1;s ligera y suele usarse en frameworks. En este caso, se crea una clase que representa un comando. A trav&#xE9;s de llamadas desde el servlet a una instancia de esa clase se configura el comando para despu&#xE9;s ordenar que se ejecute y una vez ejecutado, obtener los resultados.</p>
<h4 id="dominio-patrones-domain-model-y-transaction-script">Dominio: Patrones Domain Model y Transaction Script</h4>
<p>Si necesito una transacci&#xF3;n que involucra a varias clases, como la creaci&#xF3;n de un pedido con l&#xED;neas de detalle, la l&#xF3;gica no puede limitarse a una &#xFA;nica clase/EJB.</p>
<p>En la capa de dominio se usan los patrones Domain Model o Transaction Script.</p>
<p>Domain Model reparte el modelo de an&#xE1;lisis entre la capa de despliegue (EJBs fachada de sesi&#xF3;n) y la capa de dominio (clases del dominio). Es m&#xE1;s adecuado para clases con un comportamiento complejo. Refleja directamente el modelo de an&#xE1;lisis (las clases de an&#xE1;lisis y los diagramas de secuencia). En este caso, una clase <code>Usuario &lt;&lt;entity&gt;&gt;</code> en la capa DTO no tiene operaciones (solo getters y setters) ni puede autogestionar el acceso a datos, y las operaciones del modelo de an&#xE1;lisis estar&#xED;an en una clase <code>Usuario &lt;&lt;domain&gt;&gt;</code> dentro de la capa de dominio.</p>
<p>Transaction Script es m&#xE1;s adecuado para clases con un comportamiento muy sencillo. El comportamiento se traslada a los EJB de sesi&#xF3;n y la capa de dominio se integra en la de despliegue.</p>
<h3 id="434-patrones-de-la-capa-de-presentaci&#xF3;n-mvc">4.3.4 Patrones de la capa de presentaci&#xF3;n: MVC</h3>
<p>En la capa de presentaci&#xF3;n se usa MVC en alguna de sus variantes, con EJBs y servicios web como modelo, servlets como controlador, y JSP para la vista. Se usan las clases &quot;Entity&quot; como DTOs y tambi&#xE9;n JavaBeans, para simplificar la presentaci&#xF3;n en los JSP.</p>
<p>Al implementar, no se debe inyectar un EJB Stateful en un Servlet porque los servlets son compartidos.</p>
<p>Para usar EJBs de sesi&#xF3;n con estado en la aplicaci&#xF3;n web, hay que hacer una b&#xFA;squeda JNDI haciendo <code>lookup()</code> y almacenar la instancia EJB devuelta en <code>HttpSession</code>. De esta manera, el mismo usuario utiliza la misma instancia del EJB en llamadas consecutivas y &#xE9;sta queda bloqueada para esa sesi&#xF3;n, evitando que otras sesiones puedan adquirirla o borrarla.</p>
<p>Para inyectar un EJB en una clase, &#xE9;sta tiene que ser una clase Servlet anotada con <code>@EJB</code> y la referencia al EJB. Si se necesita el EJB en otra clase auxiliar, hay que hacer despu&#xE9;s el lookup desde dicha clase auxiliar.</p>
<p>Si se usa m&#xE1;s de un servidor, hay que definir interfaces remotas. Esto afecta al dise&#xF1;o del acceso a datos porque perdemos la referencia directa a la instancia, no tenemos acceso directo a las clases entity, y el rendimiento disminuye.</p>
<h4 id="sincronizaci&#xF3;n-en-jpa-y-jee">Sincronizaci&#xF3;n en JPA y JEE</h4>
<p>La entity pasa por distintos estados seg&#xFA;n su sincronizaci&#xF3;n con la persistencia. En <code>managed</code>, el cambio que se haya realizado sobre la entity ha sido grabado. En <code>detached</code>, los cambios no se guardan y hay que hacer un <code>merge()</code> o <code>refresh()</code>.</p>
<p><img src="img/estadosEntity.png" alt="Estados de una Entity"></p>
<h2 id="44-component-based-software-engineering-cbse-desarrollo-para-y-con-reutilizaci&#xF3;n">4.4 Component Based Software Engineering (CBSE): Desarrollo para y con reutilizaci&#xF3;n</h2>
<h3 id="desarrollo-para-reutilizaci&#xF3;n">Desarrollo para reutilizaci&#xF3;n</h3>
<p>Desarrollo para reutilizaci&#xF3;n como desarrollo de componentes o servicios que se pueden reutilizar en otras aplicaciones, y puede implicar la generalizaci&#xF3;n de componentes ya existentes.</p>
<p>Un componente para reutilizaci&#xF3;n debe reflejar abstracciones estables de dominio, ocultar la representaci&#xF3;n del estado, ser lo m&#xE1;s independiente posible y, en caso de publicar excepciones, debe hacerlo a trav&#xE9;s de la interfaz de componente.</p>
<p>Hay un equilibrio entre reutilizaci&#xF3;n y facilidad de uso, pues cuanto m&#xE1;s general la interfaz, mayor capacidad de reutilizaci&#xF3;n pero ser&#xE1; m&#xE1;s compleja y por tanto m&#xE1;s dif&#xED;cil de usar.</p>
<p>En este caso hay que realizar algunos cambios como los siguientes:</p>
<ul>
<li>Retirar los m&#xE9;todos espec&#xED;ficos de la aplicaci&#xF3;n.</li>
<li>Cambiar los nombres para hacerlos generales.</li>
<li>Agregar m&#xE9;todos para ampliar la cobertura.</li>
<li>Hacer un manejo de excepciones consistente.</li>
<li>Integrar los componentes requeridos para reducir las dependencias.</li>
<li>Agregar una interfaz de configuraci&#xF3;n para la adaptaci&#xF3;n de los componentes, como NetBeans y su paleta de JavaBeans.</li>
</ul>
<h4 id="sistemas-legados-como-componentes">Sistemas legados como componentes</h4>
<p>Los sistemas existentes se pueden empaquetar como componentes para su reutilizaci&#xF3;n. Esto requiere escribir un componente tipo <em>wrapper</em> (envoltorio) que implementa las interfaces para acceder al sistema anterior y para que &#xE9;ste acceda a otros servicios. Puede que esta sea una soluci&#xF3;n mucho menos costosa que una reescritura del sistema completo.</p>
<h3 id="desarrollo-con-reutilizaci&#xF3;n">Desarrollo con reutilizaci&#xF3;n</h3>
<p>Desarrollo con reutilizaci&#xF3;n como desarrollo de nuevas aplicaciones basadas en componentes y servicios existentes.</p>
<p>El proceso habitual para el <strong>desarrollo basado en componentes</strong> es el siguiente:</p>
<ol>
<li>Esbozar los requisitos del sistema.</li>
<li>Identificar los componentes candidatos.</li>
<li>Modificar los requerimientos de acuerdo con los componentes descubiertos.</li>
<li>Dise&#xF1;o arquitect&#xF3;nico.</li>
<li>Identificar los componentes.<ol>
<li>B&#xFA;squeda de componentes.</li>
<li>Selecci&#xF3;n de componentes.</li>
<li>Validaci&#xF3;n de componentes.</li>
</ol>
</li>
<li>Componentes para crear el sistema.</li>
</ol>
<p>El desarrollo basado en componentes se basa en encontrar e integrar componentes reutilizables. Para ello, es indispensable buscar un equilibrio enre los requisitos ideales y los servicios prestados por los componentes disponibles.</p>
<h3 id="441-composici&#xF3;n-y-adaptaci&#xF3;n">4.4.1 Composici&#xF3;n y adaptaci&#xF3;n</h3>
<p>La <strong>composici&#xF3;n</strong> es el proceso de ensamblaje de componentes para crear un sistema. Involucra la integraci&#xF3;n de los componentes entre s&#xED; y con la infraestructura de componentes. Normalmente hay que escribir c&#xF3;digo pegamento que integre los componentes.</p>
<p>Se puede hacer una composici&#xF3;n <strong>secuencial</strong> si se quieren componer las interfaces de cada componente; una composici&#xF3;n <strong>jer&#xE1;rquica</strong> si un componente usa servicios de otro directamente conect&#xE1;ndose a &#xE9;l; o una composici&#xF3;n <strong>aditiva</strong> si las interfaces de varios componentes se unen para crear un nuevo componente que expone interfaces que combinan las interfaces de los componentes internos.</p>
<p>Puede que las interfaces sean incompatibles por tener mismas operaciones pero distintos par&#xE1;metros, por tener nombres de operaciones distintos, o porque faltan algunas operaciones. Para solventarlo, se usa como c&#xF3;digo pegamento el patr&#xF3;n &quot;adapter&quot;</p>
<p>Hay que estudiar bien la sem&#xE1;ntica y sintaxis de las interfaces para entender bien qu&#xE9; hacen y prevenir posibles efectos secundarios, asegurando que los componentes funcionar&#xE1;n como esperamos en todo caso. Si a&#xF1;adimos OCL a la interfaz, podemos eliminar estas ambig&#xFC;edades.</p>
<h2 id="45-dise&#xF1;o-basado-en-componentes">4.5 Dise&#xF1;o basado en componentes</h2>
<p>Las actividades de dise&#xF1;o desde un enfoque top-down son las siguientes:</p>
<ol>
<li>Identificar las interfaces, que reflejan las operaciones del sistema. Hay que utilizar los requisitos funcionales para identificar responsabilidades de alto nivel a partir de los casos de uso. Las interfaces agrupan conjuntos de operaciones relacionadas alrededor de la informaci&#xF3;n que manejan o los servicios que ofrecen.</li>
<li>Asignar responsabilidades a los componentes, es decir, ver qu&#xE9; interfaces implementar&#xE1;n. Evaluamos los componentes identificados contra los criterios de dise&#xF1;o deseables, preveyendo interfaces requeridas para conectar componentes alternativos. Mirar bien la herencia e interfaces, estudiando cada asociaci&#xF3;n por si tiene que ser a otra clase o puede ser a una interfaz, as&#xED; como los mensajes enviados. Se buscan grupos de operaciones repetidas que puedan ser &#xFA;tiles en otros lugares para poder desarrollarlas como componente independiente. Tambi&#xE9;n se mira si se dispone de alg&#xFA;n componente o se puede adquirir que pueda ser integrado en el sistema.</li>
<li>Dise&#xF1;ar en detalle las interfaces. Definir las operaciones ofrecidas o requeridas por cada interfaz de cada componente, indicando par&#xE1;metros de entrada y salida, pre y post condiciones, efectos de cada operaci&#xF3;n, naturaleza de la interfaz (as&#xED;ncrono, RPC, WebService...)... Se puede usar UML+OCL, lenguajes de programaci&#xF3;n o IDLs.</li>
<li>Verificar los requisitos funcionales. Hacer el seguimiento de cada requisito utilizando la estructura funcional.</li>
<li>Comparar contraescenarios. Verificar casos de uso analizando la estructura funcional propuesta, junto con los participantes, a trav&#xE9;s de los casos de uso.</li>
<li>Analizar interacciones. Analizar la estructura propuesta en busca de interacciones excesivas (demasiado acoplamiento).</li>
<li>Analizar la flexibilidad del sistema. Plantear escenarios &quot;what if&quot; (&#xBF;qu&#xE9; pasar&#xED;a si...?).</li>
</ol>
<p>Algunos errores frecuentes:</p>
<ul>
<li>Mala definici&#xF3;n de interfaces o de responsabilidades.</li>
<li>Componentes de tipo utilidad modelados como componentes funcionales.</li>
<li>Nivel inapropiado de detalle.</li>
<li>N&#xFA;mero elevado de dependencias.</li>
<li>&quot;God component&quot; o &quot;Manager&quot;: 50% de las responsabilidades en menos del 25% de los componentes.</li>
</ul>
<p>Lista de control:</p>
<ul>
<li>&#xBF;El modelo tiene un n&#xFA;mero razonable de componentes?</li>
<li>&#xBF;Todos los componentes tienen nombre, responsabilidades claras e interfaces claramente definidas?</li>
<li>&#xBF;Todas las interacciones entre los componentes ocurren a trav&#xE9;s de interfaces y conectores entre ellas?</li>
<li>&#xBF;Los componentes tienen una alta cohesi&#xF3;n?</li>
<li>&#xBF;Los componentes muestran un bajo acoplamiento?</li>
<li>&#xBF;Se ha validado la estructura propuesta contra los requisitos funcionales?</li>
<li>&#xBF;Ha considerado c&#xF3;mo se porta la arquitectura en escenarios hipot&#xE9;ticos de cambio?</li>
</ul>
<h2 id="46-despliegue-de-componentes">4.6 Despliegue de componentes</h2>
<p>Los componentes se realizan con artefactos f&#xED;sicos que los implementan. El modelo de despliegue describe d&#xF3;nde se encuentran f&#xED;sicamente, es decir, describe c&#xF3;mo se distribuye la funcionalidad en nodos f&#xED;sicos, representando la traducci&#xF3;n de la arquitectura de software a la arquitectura del sistema f&#xED;sico. Los nodos tienen relaciones que representan los m&#xE9;todos de comunicaci&#xF3;n entre ellos, por ejemplo http, iiop, netbios...</p>
<p>Un <strong>artefacto</strong> representa software como un .jar, .class o .exe, es decir, un elemento concreto como un archivo que puede ser desplegado en los nodos. En los nodos se despliegan instancias de artefactos. Un artefacto puede representar m&#xE1;s de un componente, por ejemplo, un .jar con varios EJBs.</p>
<p>En el modelo se describen relaciones con los componentes que realiza cada artefacto y con otros artefactos.</p>
<p>Para definir el tipo de los artefactos se usan estereotipos est&#xE1;ndar de UML pero tambi&#xE9;n se pueden usar perfiles espec&#xED;ficos como por ejemplo el de Java.</p>
<p>Los pasos a seguir para dise&#xF1;ar la arquitectura f&#xED;sica son:</p>
<ol>
<li>Determinar nodos y conexiones.</li>
<li>Despliegue de artefactos.</li>
</ol>
<p>Cuando se usa m&#xE1;s de un servidor, hay que definir interfaces remotas. Eso influye en la forma de dise&#xF1;ar el acceso a datos, pues perdemos la referencia directa a la instancia y no hay acceso directo a las clases entity, habiendo que colocarlas en una biblioteca compartida.</p>
<p>El rendimiento disminuye al usar interfaces remotas y con los EJB stateful.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../dbcs/3_frameworks.html" class="navigation navigation-prev " aria-label="Previous page: Frameworks"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../ico/0_Introduccion.html" class="navigation navigation-next " aria-label="Next page: Introducción"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
