<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Modelo relacional | Apuntes de 4º de Ingeniería Informática</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../adbd/4_lenguajes_relacionales.html" />
    
    
    <link rel="prev" href="../adbd/2_modelado_datos.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="1.3"
        data-chapter-title="Modelo relacional"
        data-filepath="adbd/3_modelo_relacional.md"
        data-basepath=".."
        data-revision="Sun Jan 31 2016 13:40:15 GMT+0100 (CET)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" >
            
            <span><b>1.</b> Administración y diseño de bases de datos</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="adbd/1_Introduccion.html">
            
                
                    <a href="../adbd/1_Introduccion.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Introducción
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="adbd/2_modelado_datos.html">
            
                
                    <a href="../adbd/2_modelado_datos.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Modelado de datos
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="1.3" data-path="adbd/3_modelo_relacional.html">
            
                
                    <a href="../adbd/3_modelo_relacional.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        Modelo relacional
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="adbd/4_lenguajes_relacionales.html">
            
                
                    <a href="../adbd/4_lenguajes_relacionales.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                        Lenguajes relacionales
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="adbd/5_SQL.html">
            
                
                    <a href="../adbd/5_SQL.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.5.</b>
                        
                        SQL
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="adbd/6_normalizacion.html">
            
                
                    <a href="../adbd/6_normalizacion.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.6.</b>
                        
                        Normalización
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="adbd/7_administracion_bd.html">
            
                
                    <a href="../adbd/7_administracion_bd.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.7.</b>
                        
                        Administración de bases de datos
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="ars/ars.html">
            
                
                    <a href="../ars/ars.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Arquitectura de redes y servicios
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3" >
            
            <span><b>3.</b> Desarrollo basado en componentes y servicios</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="dbcs/1_introduccion.html">
            
                
                    <a href="../dbcs/1_introduccion.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Introducción
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="dbcs/2_modelos_componentes.html">
            
                
                    <a href="../dbcs/2_modelos_componentes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Modelos de componentes
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="dbcs/3_frameworks.html">
            
                
                    <a href="../dbcs/3_frameworks.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        Frameworks
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="dbcs/4_diseno.html">
            
                
                    <a href="../dbcs/4_diseno.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                        Diseño
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="dbcs/5_servicio_web.html">
            
            <span><b>3.5.</b> Servicios web</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" >
            
            <span><b>4.</b> Ingeniería del conocimiento</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="ico/0_Introduccion.html">
            
                
                    <a href="../ico/0_Introduccion.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Introducción
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="ico/1_logica_proposicional.html">
            
                
                    <a href="../ico/1_logica_proposicional.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        Lógica proposicional
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="ico/2_logica_predicados.html">
            
                
                    <a href="../ico/2_logica_predicados.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                        Lógica de predicados
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="ico/3_estrategias_resolucion.html">
            
                
                    <a href="../ico/3_estrategias_resolucion.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.4.</b>
                        
                        Estrategias de resolución
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="ico/4_programacion_logica.html">
            
                
                    <a href="../ico/4_programacion_logica.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.5.</b>
                        
                        Programación lógica
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="ico/5_representacion_conocimiento.html">
            
                
                    <a href="../ico/5_representacion_conocimiento.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.6.</b>
                        
                        Representación del conocimiento
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.7" data-path="ico/6_sistemas_basados_en_reglas.html">
            
            <span><b>4.7.</b> Sistemas basados en reglas</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.8" data-path="ico/7_metodos_estructurados.html">
            
                
                    <a href="../ico/7_metodos_estructurados.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.8.</b>
                        
                        Métodos estructurados
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" >
            
            <span><b>5.</b> Planificación y gestión de proyectos</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="pgp/1.html">
            
                
                    <a href="../pgp/1.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        Introducción
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="pgp/2_1_Planificacion.html">
            
                
                    <a href="../pgp/2_1_Planificacion.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        Planificación
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="pgp/2_2_PERT_CPM.html">
            
                
                    <a href="../pgp/2_2_PERT_CPM.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                        PERT y CPM
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="pgp/2_3_gestion_recursos.html">
            
                
                    <a href="../pgp/2_3_gestion_recursos.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.</b>
                        
                        Gestión de recursos
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="pgp/2_4_gestion_personas.html">
            
                
                    <a href="../pgp/2_4_gestion_personas.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.5.</b>
                        
                        Gestión de personas
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.6" data-path="pgp/2_5_gestion_riesgos.html">
            
                
                    <a href="../pgp/2_5_gestion_riesgos.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.6.</b>
                        
                        Gestión de riesgos
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.7" data-path="pgp/3_1_proceso_unificado.html">
            
                
                    <a href="../pgp/3_1_proceso_unificado.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.7.</b>
                        
                        Proceso unificado
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.8" data-path="pgp/3_2_plan_de_proceso.html">
            
                
                    <a href="../pgp/3_2_plan_de_proceso.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.8.</b>
                        
                        Plan de proceso
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.9" data-path="pgp/3_3_SCRUM.html">
            
                
                    <a href="../pgp/3_3_SCRUM.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.9.</b>
                        
                        SCRUM
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.10" data-path="pgp/4_gestion_configuraciones.html">
            
                
                    <a href="../pgp/4_gestion_configuraciones.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.10.</b>
                        
                        Gestión de configuraciones
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" >
            
            <span><b>6.</b> Profesión y sociedad</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="pys/1_ambitos_y_perfiles_profesionales.html">
            
                
                    <a href="../pys/1_ambitos_y_perfiles_profesionales.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        Ámbitos y perfiles profesionales
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="pys/2_formacion_complementaria.html">
            
                
                    <a href="../pys/2_formacion_complementaria.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                        Formación complementaria
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" data-path="ssee/ssee.html">
            
                
                    <a href="../ssee/ssee.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        Sistemas embebidos
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >Apuntes de 4º de Ingeniería Informática</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="3-modelo-relacional">3. Modelo relacional</h1>
<h2 id="origen-e-importancia">Origen e importancia</h2>
<p>Se plantea como un sistema sencillo y potente formado por una BD como conjunto de tablas con filas y columnas, con las tablas asociadas entre s&#xED;.</p>
<p>El modelo relacional se origina en los 70, sustituyendo a otros modelos como el jer&#xE1;rquico o en red. Es el modelo m&#xE1;s ampliamente utilizado por la sencilla representaci&#xF3;n de los datos y la facilidad para formular consultas. Hay todo un ecosistema de RDBMS de diversas empresas.</p>
<p>Hay otros modelos competidores como el modelo objeto-relacional o la renovaci&#xF3;n de &quot;viejas ideas&quot; como los datos jer&#xE1;rquicos.</p>
<p>Un lenguaje relacional permite la definici&#xF3;n (DDL) y la manipulaci&#xF3;n (DML) de los datos. El modelo soporta consultas sencillas y potentes con una <strong>sem&#xE1;ntica precisa de consulta relacional</strong>. El DBMS optimiza las operaciones.</p>
<p>El est&#xE1;ndar SQL ha ido evolucionando. Son rese&#xF1;ables SQL-92, que supuso una importante revisi&#xF3;n, y SQL-99, que a&#xF1;ade extensiones importantes y es el est&#xE1;ndar actual.</p>
<h2 id="definiciones">Definiciones</h2>
<p>Una base de datos relacional est&#xE1; compuesta de relaciones.</p>
<p>Una relaci&#xF3;n est&#xE1; compuesta de dos partes. Por un lado, un esquema que define el nombre de la relaci&#xF3;n y el nombre y tipo de cada columna (atributo, campo). Por otro lado, instancias que corresponden con valores de la tabla (registro, tupla) con todas las tuplas distintas.</p>
<h2 id="creaci&#xF3;n-de-relaciones">Creaci&#xF3;n de relaciones</h2>
<p>Hay que crear la relaci&#xF3;n (tabla) con sus atributos, especificando los tipos para cada campo. El tipado se impone por el DBMS al a&#xF1;adir o modificar tuplas.</p>
<p>Es habitual la existencia de diversas tablas que estar&#xE1;n eventualmente relacionadas.</p>
<p>Ejemplo de creaci&#xF3;n de tablas:</p>
<pre><code class="lang-sql"><span class="hljs-operator"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> Estudiante (
    nia <span class="hljs-built_in">INTEGER</span>,
    nombre <span class="hljs-built_in">CHAR</span>(<span class="hljs-number">20</span>),
    login <span class="hljs-built_in">CHAR</span>(<span class="hljs-number">10</span>),
    edad <span class="hljs-built_in">INTEGER</span>,
    notam <span class="hljs-built_in">REAL</span>
)

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> Matricula (
    nia <span class="hljs-built_in">INTEGER</span>,
    cod <span class="hljs-built_in">CHAR</span>(<span class="hljs-number">20</span>),
    nota <span class="hljs-built_in">REAL</span>
)
</span></code></pre>
<h2 id="destrucci&#xF3;n-y-modificaci&#xF3;n-de-tablas">Destrucci&#xF3;n y modificaci&#xF3;n de tablas</h2>
<p>La destrucci&#xF3;n de una relaci&#xF3;n implica su borrado del esquema y el borrado de todas su tuplas.</p>
<pre><code class="lang-sql"><span class="hljs-operator"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> Estudiante
</span></code></pre>
<p>La modificaci&#xF3;n de un esquema se puede hacer a&#xF1;adiendo, borrando o modificando campos. Para campos a&#xF1;adidos, todas las tuplas son extendidas con valor <code>null</code> en ese campo.</p>
<pre><code class="lang-sql"><span class="hljs-operator"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> Estudiante
    <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> matr <span class="hljs-built_in">DATE</span>
</span></code></pre>
<h2 id="a&#xF1;adir-borrar-y-modificar-tuplas">A&#xF1;adir, borrar y modificar tuplas</h2>
<p>Se puede insertar una tupla en la relaci&#xF3;n:</p>
<pre><code class="lang-sql"><span class="hljs-operator"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> Estudiante (nia, nombre, login, edad, notam)
    <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">5557</span>, <span class="hljs-string">&apos;Rojo&apos;</span>, <span class="hljs-string">&apos;rojo@cie&apos;</span>, <span class="hljs-number">23</span>, <span class="hljs-number">8.0</span>)
</span></code></pre>
<p>El borrado se realiza indicando la condici&#xF3;n que cumplir&#xE1;n todas las tuplas a ser borradas:</p>
<pre><code class="lang-sql"><span class="hljs-operator"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> Estudiante <span class="hljs-keyword">E</span> <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">E</span>.nombre=<span class="hljs-string">&apos;Ledesma&apos;</span>
</span></code></pre>
<p>La modificaci&#xF3;n se realiza igualmente con una condici&#xF3;n de selecci&#xF3;n de tuplas:</p>
<pre><code class="lang-sql"><span class="hljs-operator"><span class="hljs-keyword">UPDATE</span> Estudiante <span class="hljs-keyword">E</span> <span class="hljs-keyword">SET</span> <span class="hljs-keyword">E</span>.edad=<span class="hljs-keyword">E</span>.edad+<span class="hljs-number">1</span> <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">E</span>.nia=<span class="hljs-number">5557</span>
</span></code></pre>
<h2 id="restricciones-de-integridad">Restricciones de integridad</h2>
<p>Las restricciones de integridad (RI) son condiciones de validez que tienen que cumplirse para cualquier instancia de la base de datos. Se especifican al definir el esquema y el DBMS las comprueba cuando se modifican las relaciones.</p>
<p>Una <strong>instancia legal</strong> es aquella que satisface todas las restricciones de integridad.</p>
<p>En las RI se usa la sem&#xE1;ntica del mundo real descrito. Hay restricciones de dominio (tipos), clave primaria, clave for&#xE1;nea... Tambi&#xE9;n se soportan otras m&#xE1;s generales.</p>
<h2 id="claves-primarias-y-candidatas">Claves primarias y candidatas</h2>
<p>Una clave (candidata) identifica un&#xED;vocamente cada tupla por medio de un subconjunto m&#xED;nimo de campos. Hay que elegir entre una de las claves candidatas la que ser&#xE1; la clave primaria, y el resto son claves alternativas.</p>
<p>Las claves primarias fuerzan ciertas condiciones. No existen dos tuplas con los mismos valores en todos los campos de la clave (a tener en cuenta para valores <code>null</code>), y ning&#xFA;n subconjunto de la clave puede ser un identificador &#xFA;nico.</p>
<p>Las claves candidatas se especifican con <code>UNIQUE</code>, y la que es elegida como primaria, con <code>PRIMARY KEY</code>.</p>
<pre><code class="lang-sql"><span class="hljs-operator"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> Matricula (
    nia    <span class="hljs-built_in">INTEGER</span>,
    cod    <span class="hljs-built_in">CHAR</span>(<span class="hljs-number">20</span>),
    nota    <span class="hljs-built_in">REAL</span>,
    PRIMARY <span class="hljs-keyword">KEY</span> (nia, cod)
)

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> Estudiante (
    nia    <span class="hljs-built_in">INTEGER</span>,
    nombre    <span class="hljs-built_in">CHAR</span>(<span class="hljs-number">20</span>),
    login    <span class="hljs-built_in">CHAR</span>(<span class="hljs-number">10</span>),
    edad    <span class="hljs-built_in">INTEGER</span>,
    notam    <span class="hljs-built_in">REAL</span>,
    <span class="hljs-keyword">UNIQUE</span> (nombre, edad),
    <span class="hljs-keyword">CONSTRAINT</span> claveEst PRIMARY <span class="hljs-keyword">KEY</span> (nia)
)
</span></code></pre>
<p>En el ejemplo anterior se le da nombre a la restricci&#xF3;n para identificar errores m&#xE1;s f&#xE1;cilmente.</p>
<h2 id="claves-for&#xE1;neas-integridad-referencial">Claves for&#xE1;neas, integridad referencial</h2>
<p>Una clave for&#xE1;nea (o externa) es un conjunto de campos en una relaci&#xF3;n que sirven para referenciar tuplas en otra relaci&#xF3;n. La referenciada debe ser una clave primaria para asegurar que solo se hace referencia a una &#xFA;nica tupla.</p>
<p>La <strong>integridad referencial</strong> se refiere a la imposici&#xF3;n de las restriciones referenciales. Por ejemplo: solo los estudiantes listados en Estudiante son admitidos en la Matr&#xED;cula de cursos.</p>
<pre><code class="lang-sql"><span class="hljs-operator"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> Matricula (
    nia    <span class="hljs-built_in">INTEGER</span>,
    cod    <span class="hljs-built_in">CHAR</span>(<span class="hljs-number">20</span>),
    nota    <span class="hljs-built_in">REAL</span>,
    PRIMARY <span class="hljs-keyword">KEY</span> (nia, cod),
    FOREIGN <span class="hljs-keyword">KEY</span> (nia) <span class="hljs-keyword">REFERENCES</span> Estudiante
)
</span></code></pre>
<p>Una clave for&#xE1;nea puede hacer referencia a la misma relaci&#xF3;n en la que se encuentra. El <code>null</code> cumple la restricci&#xF3;n de clave for&#xE1;nea pero no la de clave primaria (no puede ser clave primaria, pero s&#xED; puede servir para indicar una relaci&#xF3;n de clave for&#xE1;nea que no se ha dado a&#xFA;n).</p>
<h2 id="cumplimiento-de-la-integridad-referencial">Cumplimiento de la integridad referencial</h2>
<p>Para cumplir la integridad referencial, hay que decidir qu&#xE9; hacer en cada caso cuando &#xE9;sta pueda incumplirse.</p>
<p>En inserci&#xF3;n con una referencia no existente, se realiza <code>NO ACTION</code>, es decir, se rechaza la inserci&#xF3;n de la nueva tupla si tiene una referencia en una clave for&#xE1;nea que referencia a una tupla que no existe.</p>
<p>En el borrado de una tupla referenciada hay varias opciones:</p>
<ul>
<li><code>NO ACTION</code>: Acci&#xF3;n por defecto. Rechaza el borrado de la tupla referenciada si tiene referencias. (No se borra el estudiante hasta que no tenga matr&#xED;culas que le hagan referencia)</li>
<li><code>CASCADE</code>: Se borra la tupla referenciada y todas aquellas que le referencian (se borra el estudiante y todas sus matr&#xED;culas).</li>
<li><code>SET DEFAULT</code>: Se asignan las referencias a la tupla que se borra a una clave por defecto (al borrar el estudiante, sus matr&#xED;culas pasan a referenciar un <code>nia</code> por defecto).</li>
<li><code>SET NULL</code> (en SQL)<!--TODO ¿Esto quiere decir que está en el estándar pero no en MySQL? -->: Al borrar la tupla referenciada, las referencias apuntan a <code>null</code>. Puede dar conflictos si la referencia (la clave for&#xE1;nea) se usa dentro de la clave primaria.</li>
</ul>
<p>En la actualizaci&#xF3;n de la clave primaria se act&#xFA;a igual que en el borrado de una tupla referenciada.</p>
<pre><code class="lang-sql"><span class="hljs-operator"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> Matricula (
    nia    <span class="hljs-built_in">INTEGER</span>,
    cod    <span class="hljs-built_in">CHAR</span>(<span class="hljs-number">20</span>),
    nota    <span class="hljs-built_in">REAL</span>,
    PRIMARY <span class="hljs-keyword">KEY</span> (nia, cod),
    FOREIGN <span class="hljs-keyword">KEY</span> (nia) <span class="hljs-keyword">REFERENCES</span> Estudiante
        <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">CASCADE</span>
        <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">SET</span> <span class="hljs-keyword">DEFAULT</span>
)
</span></code></pre>
<p>La acci&#xF3;n &apos;cascade&apos; se propaga en cascada por las siguientes realciones que referencian a la tupla borrada o actualizada.</p>
<h2 id="otras-restricciones">Otras restricciones</h2>
<p>Restricciones de columna, que pueden ser <code>NOT NULL</code>, que evita que se asignen nulos a la columna, o <code>CHECK</code>, que especifica una condici&#xF3;n de integridad.</p>
<pre><code class="lang-sql"><span class="hljs-operator"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> Estudiante (
    nia    <span class="hljs-built_in">INTEGER</span>,
    nombre    <span class="hljs-built_in">CHAR</span>(<span class="hljs-number">20</span>),
    login    <span class="hljs-built_in">CHAR</span>(<span class="hljs-number">10</span>),
    edad    <span class="hljs-built_in">INTEGER</span>,
    notam    <span class="hljs-built_in">REAL</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    <span class="hljs-keyword">UNIQUE</span> (nombre, edad),
    <span class="hljs-keyword">CONSTRAINT</span> claveEst PRIMARY <span class="hljs-keyword">KEY</span> (nia),
    <span class="hljs-keyword">CONSTRAINT</span> notampos <span class="hljs-keyword">CHECK</span> (notam&gt;=<span class="hljs-number">0</span>)
)
</span></code></pre>
<p>Otras restricciones son las aserciones y disipadores, que se ver&#xE1;n m&#xE1;s adelante.</p>
<h2 id="dise&#xF1;o-l&#xF3;gico-er--relacional">Dise&#xF1;o l&#xF3;gico: ER -&gt; Relacional</h2>
<p>ERD (Diagrama Entidad-Relaci&#xF3;n)</p>
<p>ER (Entidad-Relaci&#xF3;n)</p>
<p>SQL
<!-- TODO Diapositiva 16: Aclarar esto --></p>
<h2 id="tipos-de-relaci&#xF3;n--tablas">Tipos de relaci&#xF3;n -&gt; tablas</h2>
<p>Si la relaci&#xF3;n es <code>1-1</code>, comprobamos si se pueden poner en t&#xE9;rminos de una &#xFA;nica entidad.</p>
<p>Si la relaci&#xF3;n es <code>1-*</code>, referenciamos en el lado <code>*</code> el valor &#xFA;nico del lado <code>1</code>.</p>
<p>Si la relaci&#xF3;n es <code>*-*</code>, habr&#xED;a que representar la relaci&#xF3;n como una nueva entidad que se relaciona con los dos extremos, siendo la nueva entidad el lado <code>1</code> en las dos nuevas relaciones creadas.</p>
<h2 id="traducci&#xF3;n-de-la-opcionalidad">Traducci&#xF3;n de la opcionalidad</h2>
<p>Si la relaci&#xF3;n tiene <code>0</code> en alg&#xFA;n extremo supone que pueden existir nulos.</p>
<h2 id="entidades-d&#xE9;biles">Entidades d&#xE9;biles</h2>
<p>Se da cuando una entidad se identifica con campos de otra entidad, y dicha relaci&#xF3;n es obligatoria. En otras palabras, se da cuando hay una clave for&#xE1;nea no nula que forma parte de la clave primaria.</p>
<h2 id="jerarqu&#xED;as-isa">Jerarqu&#xED;as ISA</h2>
<!-- TODO ¿? Diapo 22, 23, 24 y 25 -->
<p>Es una gu&#xED;a de elecci&#xF3;n, pero puede haber otros factores (cantidad de nulos, relaciones, consultas / combinaci&#xF3;n de tablas).</p>
<p>Tablas para las sublclases: diferencias entre ellas; todas en una tabla dar&#xED;a lugar a nulos y restricciones. Diferencia con la superclase; puede haber tablas para cada combinaci&#xF3;n superclase/subclase.</p>
<p>Tabla para la superclase: Si tiene asociaciones <code>1:*</code>; las tablas que incluyen las claves for&#xE1;neas deben apuntar a una &#xFA;nica tabla.</p>
<h2 id="vistas-y-seguridad">Vistas y seguridad</h2>
<p>Una vista es una tabla que no almacena tuplas ya que estas se obtienen a partir de una definici&#xF3;n sobre tablas base. Permite restructurar el esquema l&#xF3;gico base e implementar pol&#xED;ticas de acceso restringido a los datos.</p>
<p>Por ejemplo, la siguiente vista evitar&#xED;a que se vean m&#xE1;s datos de los necesarios (nia y nota media) de los estudiantes, y se restringe a que solo se vean los alumnos que cumplan la condici&#xF3;n.</p>
<pre><code class="lang-sql"><span class="hljs-operator"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> EstudianteMH (nia,notam)
    <span class="hljs-keyword">AS</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">E</span>.nia,<span class="hljs-keyword">E</span>.notam
        <span class="hljs-keyword">FROM</span> Estudiantes <span class="hljs-keyword">E</span>
        <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">E</span>.notam &gt;= <span class="hljs-number">9.0</span>
</span></code></pre>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../adbd/2_modelado_datos.html" class="navigation navigation-prev " aria-label="Previous page: Modelado de datos"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../adbd/4_lenguajes_relacionales.html" class="navigation navigation-next " aria-label="Next page: Lenguajes relacionales"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
